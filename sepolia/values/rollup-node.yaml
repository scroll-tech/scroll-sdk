initContainers:
  3-check-postgres-connection:
    image: atkrad/wait4x:latest
    args:
      - postgresql
      - $(DATABASE_URL)
      - --timeout
      - "0"
    envFrom:
      - secretRef:
          name: rollup-node-secret-env

ingress:
  main:
    ingressClassName: "nginx"
    hosts:
      - host: rollup-node-3.devnet.scroll.tech
        paths:
          - path: /
            pathType: Prefix

configMaps:
  env:
    enabled: true
    data:
      L1_RPC_ENDPOINT: "https://alien-flashy-arm.ethereum-sepolia.quiknode.pro/2aeb75414e5ee0e930b64c2e7feff59efb537f30"
      L2_RPC_ENDPOINT: "http://l2-rpc:8545"

externalSecrets:
  rollup-config:
    data:
      - remoteRef:
          key: scroll-sepolia/rollup-config
        secretKey: rollup-config.json
    refreshInterval: 10s
    serviceAccount: external-secrets
  rollup-node-secret-env:
    data:
      - remoteRef:
          key: scroll-sepolia/rollup-node-env
          property: DATABASE_URL
        secretKey: DATABASE_URL
    refreshInterval: 2m
    serviceAccount: external-secrets
